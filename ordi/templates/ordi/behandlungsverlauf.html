
{% extends 'base.html' %}


{% block title %}
  Behandlungsverlauf
{% endblock %}


{% block content %}
    <div>
        <div class="row-grid" style="grid-template-columns: auto auto;">
            {% include 'ordi/_person.html' %}

            {% include 'ordi/_tier.html' %}
        </div>
    </div>

    <div class="small-gap"></div>

    {% if behandlungsverlauf %}
      <form method="post" action="{{ url_for('ordi.edit_behandlungsverlauf', behandlungsverlauf_id=behandlungsverlauf.id) }}">
    {% else %}
      <form method="post" action="{{ url_for('ordi.create_behandlungsverlauf', id=id) }}">
    {% endif %}
        <input type="hidden" name="behandlungsverlauf_id" value="{{- request.form['behandlungsverlauf_id'] or behandlungsverlauf.id -}}">

      <div class="row-grid" style="grid-template-columns: auto auto;">
        <label for="datum">Datum</label>
        <input size="10" type="text" name="datum" id="datum" class="date" value="{{- request.form['datum'] or behandlungsverlauf.datum or datum -}}" required>

        <label for="diagnose">Diagnose</label>
        <input size="40" type="text" name="diagnose" id="diagnose" value="{{- request.form['diagnose'] or behandlungsverlauf.diagnose -}}" required>

        <label style="align-items: top;" for="behandlung">Behandlung</label>
        <textarea style="width: 640px; height: 180px" name="behandlung" id="behandlung" required>{{- request.form['behandlung'] or behandlungsverlauf.behandlung -}}</textarea>
      </div>

      <div class="small-gap"></div>

      <div class="flex-container">
          <p><input type="submit" value="Behandlungsverlauf aktualisieren"></p>
        {% if behandlungsverlauf %}
          <p><a class="btn" href="{{ url_for('ordi.downloadb', behandlungsverlauf_id=behandlungsverlauf.id) }}">Behandlungsverlauf drucken</a></p>
        {% else %}
          <p><a style="color: Gray" href="#">Behandlungsverlauf drucken</a></p>
        {% endif %}
      </div>
    </form>

    <script>
        $(document).ready(function(){
            $(".person input").prop("disabled", true);
            $(".person select").prop("disabled", true);

            $(".tier input").prop("disabled", true);
            $(".tier select").prop("disabled", true);

            $.datepicker.setDefaults($.datepicker.regional["de"]);
            $(".date").datepicker({ 
                dateFormat: "yy-mm-dd",
                changeMonth: true,
                changeYear: true 
            });

            $("#diagnose").focus();
        });
    </script>
{% endblock %}
